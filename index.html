<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Jabatan Pengairan dan Saliran Kuala Nerus</title>
    <link rel="stylesheet" href="https://unpkg.com/leaflet@1.7.1/dist/leaflet.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/leaflet.markercluster/1.4.1/MarkerCluster.Default.css">
    <style>
        body {
            font-family: 'Roboto', Arial, sans-serif;
            margin: 0;
            padding: 0;
            line-height: 1.6;
            background-color: #f5f5f5;
            color: #333;
        }

        header {
            background-color: #004d99;
            color: #fff;
            text-align: center;
            padding: 1rem 0;
        }

        nav {
            background-color: #0073e6;
            padding: 0.5rem 1rem;
			position: sticky;
			top: 0;
			z-index: 1000;
        }

        nav ul {
            list-style: none;
            margin: 0;
            padding: 0;
            display: flex;
            justify-content: space-around;
        }

        nav ul li {
            margin: 0;
        }

        nav ul li a {
            color: #fff;
            text-decoration: none;
            font-weight: bold;
            padding: 0.5rem 1rem;
            border-radius: 5px;
            transition: background 0.3s ease;
        }

        nav ul li a:hover {
            background-color: #005bb5;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 1rem;
        }

        section {
            margin: 2rem 0;
            padding: 1rem;
            background: #fff;
            border-radius: 10px;
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
        }

        section h2 {
            color: #004d99;
        }

        #map {
            width: 100%;
            height: 400px;
            margin-top: 1rem;
            border-radius: 10px;
            box-shadow: 0 2px 4px rgba(0, 0, 0, 0.2);
        }

        footer {
            background-color: #004d99;
            color: #fff;
            text-align: center;
            padding: 1rem;
        }
		
		#iframe {
			width: 100%;
			height: 250px;
			border-radius: 10px;
			box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
		}
		
		#documents h3 {
			color: #0073e6;
		}

		#documents ul {
			list-style: none;
			padding: 0;
		}

		#documents ul li {
			margin: 0.5rem 0;
			font-size: 16px;
		}

		#documents ul li a {
			text-decoration: none;
			color: #0073e6;
			font-weight: bold;
			display: flex;
			align-items: center;
		}

		#documents ul li a:hover {
			text-decoration: underline;
		}

		#documents ul li::before {
			content: "📥 ";
			font-size: 18px;
			margin-right: 8px;
		}
		
		#feedback h3 {
			color: #004d99;
		}

		form {
			background: #f9f9f9;
			padding: 1rem;
			border-radius: 10px;
			box-shadow: 0 2px 6px rgba(0, 0, 0, 0.1);
		}

		input, textarea, select, button {
			width: 100%;
			padding: 0.7rem;
			margin: 0.5rem 0;
			border-radius: 5px;
			border: 1px solid #ccc;
		}

		button {
			background: #28a745;
            color: white;
            border: none;
            padding: 10px 20px;
            cursor: pointer;
            border-radius: 5px;
            transition: 0.3s;
            display: block;
            margin: 20px auto;
            text-align: center;
		}

		button:hover {
			background-color: #005bb5;
		}

		details {
			margin-bottom: 1rem;
			background: #f1f1f1;
			padding: 0.7rem;
			border-radius: 5px;
			cursor: pointer;
		}
		
		#services h3, #request-services h2, #service-fees h2 {
			color: #004d99;
		}

		.grid {
			display: grid;
			grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
			gap: 20px;
		}

		article {
			background: #f9f9f9;
			padding: 1rem;
			border-radius: 10px;
			box-shadow: 0 2px 6px rgba(0, 0, 0, 0.1);
		}

		ul {
			list-style: none;
			padding: 0;
		}

		ul li {
			padding: 0.5rem 0;
			font-size: 16px;
		}

		table {
			width: 100%;
			border-collapse: collapse;
			margin-top: 1rem;
		}

		table, th, td {
			border: 1px solid #ccc;
		}

		th, td {
			padding: 0.7rem;
			text-align: left;
		}

		th {
			background: #0073e6;
			color: white;
		}
		
		.search-container {
			display: flex;
			justify-content: center;
			margin-top: 10px;
		}

		.search-container input {
			width: 60%;
			padding: 8px;
			border: 1px solid #ccc;
			border-radius: 5px;
		}

		.search-container button {
			background-color: #0073e6;
			color: white;
			padding: 8px 12px;
			border: none;
			border-radius: 5px;
			cursor: pointer;
		}

		.search-container button:hover {
			background-color: #005bb5;
		}

   </style>
</head>

<body>
    <!-- Header -->
    <header>
		<img src="jpslogo.png" width="80" height="40" alt="JPS Kuala Nerus Logo">
		<h1>JABATAN PENGAIRAN DAN SALIRAN DAERAH KUALA NERUS</h1>
    </header>

    <!-- Navigation -->
    <nav>
        <ul>
            <li><a href="#about">About</a></li>
            <li><a href="#news">News</a></li>
            <li><a href="#services">Services</a></li>
            <li><a href="#map-section">Interactive Map</a></li>
            <li><a href="#forms">Forms</a></li>
            <li><a href="#resources">Resources</a></li>
        </ul>
    </nav>

    <!-- Main Content -->
    <div class="container">
	<div class="search-container">
			<input type="text" id="search" placeholder="Cari maklumat..." onkeyup="searchContent()">
			<button onclick="searchContent()">Cari</button>
		</div>
		<p id="search-results" class="search-error"></p>
        <section id="about">
            <h2>About Us</h2>
            <p>We ensure efficient and sustainable water management for the benefit of the community.</p>
        </section>

        <section id="news">
            <h2>News & Updates</h2>
            <p>Latest updates and announcements will appear here.</p>
			<div class="container">
			<hgroup>
            <h2>Latest News</h2>
            <h3>Updates from JPS Terengganu</h3>
			</hgroup>
			<ul id="news-list">
            <li>Loading news...</li>
			</ul>
			</div>
        </section>

        <section id="services">
            <h2>Our Services</h2>
            <p>We provide a range of water management and drainage services to support the community.</p>
        </section>

		<section id="map-section">
			<h2>Interactive Map</h2>
			<button id="toggleMap">Show/Hide Map</button>
			<div id="mapContainer">
				<div id="map"></div>
			</div>
		</section>

        <section id="forms">
		<form>
			<label for="name">Nama:</label>
			<input type="text" id="name" required>

			<label for="email">Email:</label>
			<input type="email" id="email" required>

			<label for="message">Mesej:</label>
			<textarea id="message" required></textarea>

			<button type="submit">Hantar</button>
		</form>
        </section>

        <section id="resources">
            <h2>Resources</h2>
			<a href="https://publicinfobanjir.water.gov.my/" target="_top">THE OFFICIAL WEB OF PUBLIC INFOBANJIR</a>
            <p>Downloadable reports, manuals, and more.</p>
        </section>
		
		<!-- Weather Forecast Section -->
		<section id="weather">
			<div class="container">
				<hgroup>
					<h2>Weather Forecast</h2>
					<h3>Current Weather in Kuala Nerus</h3>
				</hgroup>
				<a class="weatherwidget-io" href="https://forecast7.com/en/5d38n103d10/kuala-nerus/" 
				   data-label_1="KUALA NERUS" data-label_2="Weather" data-theme="dark">
				   Kuala Nerus Weather
				</a>
				<div id="weather-info"></div>
			</div>
		</section>
		
		<!-- Document Repository Section -->
		<section id="documents">
				<div class="container">
				<hgroup>
					<h2>Repositori Dokumen</h2>
					<h3>Muat Turun Borang & Garis Panduan</h3>
				</hgroup>
				
				<div class="grid">
					<!-- Permit Applications -->
					<article>
						<h3>Borang Permohonan</h3>
						<ul>
							<li>📥 <a href="documents/permit-sungai.pdf" download>Permohonan Rezab Sungai (PDF)</a></li>
							<li>📥 <a href="documents/water-extraction.pdf" download>Permohonan Pengekstrakan Air (PDF)</a></li>
						</ul>
					</article>

					<!-- Flood Safety Guidelines -->
					<article>
						<h3>Panduan Keselamatan Banjir</h3>
						<ul>
							<li>📥 <a href="documents/flood-safety.pdf" download>Panduan Pengurusan Banjir (PDF)</a></li>
							<li>📥 <a href="documents/emergency-plan.pdf" download>Pelan Kecemasan Banjir (PDF)</a></li>
						</ul>
					</article>

					<!-- Project Tender Documents -->
					<article>
						<h3>Dokumen Tender Projek</h3>
						<ul>
							<li>📥 <a href="documents/tender-guidelines.pdf" download>Garis Panduan Tender (PDF)</a></li>
							<li>📥 <a href="documents/bid-requirements.pdf" download>Keperluan Bidaan Projek (PDF)</a></li>
						</ul>
					</article>

					<!-- Technical Manuals -->
					<article>
						<h3>Manual Teknikal</h3>
						<ul>
							<li>📥 <a href="documents/hydrology-manual.pdf" download>Manual Hidrologi (PDF)</a></li>
							<li>📥 <a href="documents/drainage-planning.pdf" download>Perancangan Sistem Saliran (PDF)</a></li>
						</ul>
					</article>
				</div>
			</div>
		</section>


		<!-- Public Complaints & Feedback Section -->
		<section id="feedback">
			<div class="container">
				<hgroup>
					<h2>Aduan & Maklum Balas</h2>
					<h3>Laporkan masalah anda atau hubungi kami</h3>
				</hgroup>

				<!-- Complaint Form -->
				<article>
					<h3>Hantar Aduan</h3>
					<form id="complaintForm">
						<label for="name">Nama Penuh:</label>
						<input type="text" id="name" name="name" placeholder="Masukkan nama anda" required>

						<label for="email">Alamat Emel:</label>
						<input type="email" id="email" name="email" placeholder="Masukkan emel anda" required>

						<label for="issueType">Jenis Aduan:</label>
						<select id="issueType" name="issueType">
							<option value="banjir">Banjir</option>
							<option value="sungai">Pencemaran Sungai</option>
							<option value="saliran">Masalah Saliran</option>
							<option value="lain">Lain-lain</option>
						</select>

						<label for="message">Butiran Aduan:</label>
						<textarea id="message" name="message" rows="4" placeholder="Terangkan masalah anda..." required></textarea>

						<button type="submit">Hantar Aduan</button>
					</form>
					<p id="responseMessage" style="color: green; display: none;">Aduan anda telah dihantar!</p>
				</article>

				<!-- Contact Information -->
				<article>
					<h3>Hubungi Kami</h3>
					<p>📞 <strong>Hotline:</strong> +60 9-XXXX XXXX</p>
					<p>📱 <strong>WhatsApp:</strong> <a href="https://wa.me/60123456789" target="_blank">+60 12-345 6789</a></p>
					<p>📧 <strong>Email:</strong> <a href="mailto:jps.kualanerus@terengganu.gov.my">jps.kualanerus@terengganu.gov.my</a></p>
					<p>📍 <strong>Alamat:</strong> Jabatan Pengairan dan Saliran Kuala Nerus, Terengganu, Malaysia</p>
				</article>

				<!-- FAQ Section -->
				<article>
					<h3>Soalan Lazim (FAQ)</h3>
					<details>
						<summary>Bagaimana cara memohon permit penggunaan rezab sungai?</summary>
						<p>Anda boleh memohon melalui borang di <a href="documents/permit-sungai.pdf" download>di sini</a> dan menghantarnya ke pejabat kami.</p>
					</details>
					<details>
						<summary>Bagaimana untuk melaporkan pencemaran sungai?</summary>
						<p>Anda boleh menghantar aduan menggunakan borang di atas atau menghubungi kami di WhatsApp.</p>
					</details>
					<details>
						<summary>Apakah perkhidmatan yang disediakan oleh JPS?</summary>
						<p>JPS menyediakan pengurusan banjir, penyelenggaraan sistem saliran, pemantauan hidrologi, dan banyak lagi.</p>
					</details>
				</article>
			</div>
		</section>
		
		
		<!-- Services Section -->
		<section id="services">
			<div class="container">
				<hgroup>
					<h2>Perkhidmatan</h2>
					<h3>Jenis Perkhidmatan yang Disediakan</h3>
				</hgroup>

				<div class="grid">
					<!-- Flood Prevention & Management -->
					<article>
						<h3>🌊 Pengurusan & Pencegahan Banjir</h3>
						<p>Merancang dan melaksanakan projek tebatan banjir untuk mengurangkan risiko banjir di kawasan berisiko tinggi.</p>
					</article>

					<!-- Hydrology & River Monitoring -->
					<article>
						<h3>📊 Pemantauan Hidrologi & Sungai</h3>
						<p>Menyediakan data hidrologi, pemantauan paras air sungai, dan sistem amaran awal banjir.</p>
					</article>

					<!-- Water Resource Management -->
					<article>
						<h3>💧 Pengurusan Sumber Air</h3>
						<p>Memastikan penggunaan sumber air yang mampan dan pengawalan pencemaran air di sungai dan tasik.</p>
					</article>

					<!-- Drainage System Maintenance -->
					<article>
						<h3>🛠️ Penyelenggaraan Sistem Saliran</h3>
						<p>Mengurus dan menyelenggara sistem saliran bagi mencegah genangan air dan hakisan tanah.</p>
					</article>

					<!-- Coastal & Erosion Protection -->
					<article>
						<h3>🏝️ Perlindungan Pantai & Hakisan</h3>
						<p>Melaksanakan projek pemuliharaan pantai untuk mencegah hakisan dan meningkatkan daya tahan pantai.</p>
					</article>

					<!-- Permit Application -->
					<article>
						<h3>📜 Permohonan Permit</h3>
						<p>Mengeluarkan permit bagi penggunaan rezab sungai, sistem pengairan, dan aktiviti berkaitan sumber air.</p>
						<p><a href="documents/permit-application.pdf" download>📥 Muat Turun Borang Permohonan</a></p>
					</article>
				</div>
			</div>
		</section>
		
		<!-- How to Request Services -->
		<section id="request-services">
			<div class="container">
				<hgroup>
					<h2>Cara Memohon Perkhidmatan</h2>
					<h3>Langkah-langkah untuk mendapatkan perkhidmatan JPS</h3>
				</hgroup>

				<ul>
					<li>🖥️ **Secara Online** - Hantar permohonan melalui <a href="mailto:jps.kualanerus@terengganu.gov.my">emel rasmi</a> atau laman rasmi.</li>
					<li>🏢 **Lawatan ke Pejabat** - Hadir ke <strong>JPS Kuala Nerus</strong> untuk permohonan secara fizikal.</li>
					<li>📞 **Hubungi Hotline** - Dapatkan maklumat lanjut melalui telefon: +60 9-XXXX XXXX.</li>
				</ul>
			</div>
		</section>
		
		<!-- Service Fees -->
		<section id="service-fees">
			<div class="container">
				<hgroup>
					<h2>Yuran Perkhidmatan</h2>
					<h3>Kadar bayaran untuk perkhidmatan yang disediakan</h3>
				</hgroup>

				<table>
					<thead>
						<tr>
							<th>Jenis Perkhidmatan</th>
							<th>Kadar Bayaran</th>
						</tr>
					</thead>
					<tbody>
						<tr>
							<td>Permohonan Rezab Sungai</td>
							<td>RM100 per permohonan</td>
						</tr>
						<tr>
							<td>Permit Pengekstrakan Air</td>
							<td>RM500 setahun</td>
						</tr>
						<tr>
							<td>Penyelenggaraan Saliran Swasta</td>
							<td>Bergantung pada saiz dan lokasi</td>
						</tr>
						<tr>
							<td>Analisis Hidrologi</td>
							<td>RM300 per laporan</td>
						</tr>
					</tbody>
				</table>
			</div>
		</section>


    </div>

    <!-- Footer -->
    <footer>
        <p>&copy; 2025 Jabatan Pengairan dan Saliran Kuala Nerus. All rights reserved.</p>
    </footer>

    <!-- Map Scripts -->
    <script src="https://unpkg.com/leaflet@1.7.1/dist/leaflet.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/leaflet/1.7.1/leaflet.js"></script>
    
	<script>
		
	function searchContent() {
	    let searchTerm = document.getElementById("search").value.toLowerCase();
	    let allItems = document.querySelectorAll("#news article, #documents ul li, #services ul li");
	
	    let resultsFound = false;
	
	    allItems.forEach(item => {
	        if (item.innerText.toLowerCase().includes(searchTerm)) {
	            item.style.display = "block"; // Show matching items
	            resultsFound = true;
	        } else {
	            item.style.display = "none"; // Hide non-matching items
	        }
	    });

    // Show a message if no results found
    if (!resultsFound) {
        document.getElementById("search-results").innerHTML = `<p>Tiada hasil ditemui untuk: "<strong>${searchTerm}</strong>"</p>`;
    } else {
        document.getElementById("search-results").innerHTML = "";
    }
}

// Ensure the function runs on every key press
document.getElementById("search").addEventListener("keyup", searchContent);
            
            results.innerHTML = found ? "" : "Maklumat tidak dijumpai.";
        }

		// Ensure the function runs on every key press
		document.getElementById("search").addEventListener("keyup", searchContent);

		let map;
	        document.getElementById("toggleMap").addEventListener("click", function () {
	            let mapContainer = document.getElementById("mapContainer");
	            if (mapContainer.style.display === "none" || mapContainer.style.display === "") {
	                mapContainer.style.display = "block";
	                if (!map) {
	                    map = L.map('map').setView([5.3851, 103.1021], 12);
	                    L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {
	                        attribution: '&copy; OpenStreetMap contributors'
	                    }).addTo(map);
	                    L.marker([5.3851, 103.1021]).addTo(map).bindPopup('JPS Kuala Nerus Office').openPopup();
	                }
	            } else {
	                mapContainer.style.display = "none";
	            }
	        });
		
		document.addEventListener("DOMContentLoaded", () => {
		    const map = L.map('map').setView([5.417, 103.385], 12);
		
		    L.tileLayer("https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png", {
		        attribution: '&copy; OpenStreetMap contributors'
		    }).addTo(map);
		
		    const locations = [
		        { name: "Pejabat Tapak Projek Tebatan Banjir UMT", lat: 5.387100151174325, lng: 103.07614105767188 },
		        { name: "PROJEK TEBATAN BANJIR DAN SISTEM PENCEGAHAN HAKISAN PANTAI DI UNIVERSITI MALAYSIA TERENGGANU (UMT)", lat: 5.4078811146430805, lng: 103.08861976649742 },
		        { name: "Empangan Kuala Nerus", lat: 5.445, lng: 103.400 }
		    ];
		
		    const markers = L.markerClusterGroup();
		    locations.forEach(location => {
		        const marker = L.marker([location.lat, location.lng]).bindPopup(`<strong>${location.name}</strong>`);
		        markers.addLayer(marker);
		    });
		
		    map.addLayer(markers);
		});
		
		async function fetchJPSNews() {
			const newsList = document.getElementById("news-list");
			newsList.innerHTML = "<li>Fetching latest news...</li>";

			try {
				const response = await fetch("https://jpsweb.terengganu.gov.my/");
				const text = await response.text();
				const parser = new DOMParser();
				const doc = parser.parseFromString(text, "text/html");

				let articles = doc.querySelectorAll(".mod-articles-category .items-row h4 a"); // Adjust selector based on website structure
				newsList.innerHTML = ""; // Clear loading text

				articles.forEach((article, index) => {
					if (index < 5) { // Show only latest 5 news
						let listItem = document.createElement("li");
						listItem.innerHTML = `<a href="${article.href}" target="_blank">${article.textContent}</a>`;
						newsList.appendChild(listItem);
					}
				});
			} catch (error) {
				newsList.innerHTML = "<li>Failed to load news.</li>";
				console.error("Error fetching news:", error);
			}
		}

		// Fetch news on page load
		document.addEventListener("DOMContentLoaded", fetchJPSNews);
		
		document.getElementById("complaintForm").addEventListener("submit", function(event) {
		event.preventDefault(); // Prevent form from refreshing the page
		document.getElementById("responseMessage").style.display = "block"; // Show success message
		setTimeout(() => { document.getElementById("responseMessage").style.display = "none"; }, 5000); // Hide after 5s
		this.reset(); // Reset form fields
		});
		
    </script>
</body>

</html>
